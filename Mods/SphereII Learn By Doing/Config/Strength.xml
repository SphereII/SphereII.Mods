<configs>
	<append xpath="/buffs/buff[@name='ProgressionLearnByDoing_Init']">
		<effect_group name="Strength Perks">
			<!-- Add Initializers for Strength CVars -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$attStrength_LBD_XP" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$attStrength_LBD_XPToNext" operation="set" value="5000"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$perkBoomstick_LBD_XP" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$perkBoomstick_LBD_XPToNext" operation="set" value="1200"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$perkPummelPete_LBD_XP" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$perkPummelPete_LBD_XPToNext" operation="set" value="1000"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$perkSkullCrusher_LBD_XP" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$perkSkullCrusher_LBD_XPToNext" operation="set" value="1100"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$perkMiner69r_LBD_XP" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$perkMiner69r_LBD_XPToNext" operation="set" value="800"/>
			<!-- Apply the new Strength Manager Buff -->
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffLBD_StrengthManager"/>
		</effect_group>
	</append>
	<append xpath="/buffs">
		<!-- =============================================================================== -->
		<!-- ===================== STRENGTH LEARN BY DOING SYSTEM ========================== -->
		<!-- =============================================================================== -->
		<!-- This is the permanent buff that handles all LBD logic for the Strength attribute and its child perks. -->
		<buff name="buffLBD_StrengthManager" hidden="true">
			<stack_type value="ignore"/>
			<!-- Group for Strength Attribute -->
			<effect_group name="Strength">
				<requirement name="HoldingItemHasTags" tags="attStrength"/>
				<triggered_effect trigger="onSelfPrimaryActionRayHit" action="ModifyCVar" cvar="$attStrength_LBD_XP" operation="add" value="5">
					<requirement name="NotHasBuff" buff="buffLBD_attStrength_XPCoolDown"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfPrimaryActionRayHit" action="AddBuff" buff="buffLBD_attStrength_XPCoolDown">
					<requirement name="NotHasBuff" buff="buffLBD_attStrength_XPCoolDown"/>
				</triggered_effect>
				<!-- Level Up Check -->
				<triggered_effect trigger="onSelfPrimaryActionRayHit" action="AddBuff" buff="buffLBD_attStrength_LevelUpCheck">
					<requirement name="CVarCompare" cvar="$attStrength_LBD_XP" operation="GTE" value="@$attStrength_LBD_XPToNext"/>
				</triggered_effect>
			</effect_group>
			<!-- Group for Boomstick Perk -->
			<effect_group name="Boomstick">
				<requirement name="HoldingItemHasTags" tags="perkBoomstick"/>
				<triggered_effect trigger="onSelfPrimaryActionRayHit" action="ModifyCVar" cvar="$perkBoomstick_LBD_XP" operation="add" value="15">
					<requirement name="NotHasBuff" buff="buffLBD_perkBoomstick_XPCoolDown"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfPrimaryActionRayHit" action="AddBuff" buff="buffLBD_perkBoomstick_XPCoolDown">
					<requirement name="NotHasBuff" buff="buffLBD_perkBoomstick_XPCoolDown"/>
				</triggered_effect>
				<!-- Level Up Check -->
				<triggered_effect trigger="onSelfPrimaryActionRayHit" action="AddBuff" buff="buffLBD_perkBoomstick_LevelUpCheck">
					<requirement name="CVarCompare" cvar="$perkBoomstick_LBD_XP" operation="GTE" value="@$perkBoomstick_LBD_XPToNext"/>
				</triggered_effect>
			</effect_group>
			<!-- Group for Pummel Pete Perk -->
			<effect_group name="Pummel Pete">
				<requirement name="HoldingItemHasTags" tags="perkPummelPete"/>
				<triggered_effect trigger="onSelfPrimaryActionRayHit" action="ModifyCVar" cvar="$perkPummelPete_LBD_XP" operation="add" value="10">
					<requirement name="NotHasBuff" buff="buffLBD_perkPummelPete_XPCoolDown"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfPrimaryActionRayHit" action="AddBuff" buff="buffLBD_perkPummelPete_XPCoolDown">
					<requirement name="NotHasBuff" buff="buffLBD_perkPummelPete_XPCoolDown"/>
				</triggered_effect>
				<!-- Level Up Check -->
				<triggered_effect trigger="onSelfPrimaryActionRayHit" action="AddBuff" buff="buffLBD_perkPummelPete_LevelUpCheck">
					<requirement name="CVarCompare" cvar="$perkPummelPete_LBD_XP" operation="GTE" value="@$perkPummelPete_LBD_XPToNext"/>
				</triggered_effect>
			</effect_group>
			<!-- Group for Skull Crusher Perk -->
			<effect_group name="Skull Crusher">
				<requirement name="HoldingItemHasTags" tags="perkSkullCrusher"/>
				<triggered_effect trigger="onSelfPrimaryActionRayHit" action="ModifyCVar" cvar="$perkSkullCrusher_LBD_XP" operation="add" value="12">
					<requirement name="NotHasBuff" buff="buffLBD_perkSkullCrusher_XPCoolDown"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfPrimaryActionRayHit" action="AddBuff" buff="buffLBD_perkSkullCrusher_XPCoolDown">
					<requirement name="NotHasBuff" buff="buffLBD_perkSkullCrusher_XPCoolDown"/>
				</triggered_effect>
				<!-- Level Up Check -->
				<triggered_effect trigger="onSelfPrimaryActionRayHit" action="AddBuff" buff="buffLBD_perkSkullCrusher_LevelUpCheck">
					<requirement name="CVarCompare" cvar="$perkSkullCrusher_LBD_XP" operation="GTE" value="@$perkSkullCrusher_LBD_XPToNext"/>
				</triggered_effect>
			</effect_group>
			<!-- Group for Miner 69'r Perk -->
			<effect_group name="Miner 69'r">
				<requirement name="HoldingItemHasTags" tags="miningTool"/>
				<requirement name="!RequirementIsTargetBlock, SCore" tags="air"/>
				<triggered_effect trigger="onSelfPrimaryActionRayHit" action="ModifyCVar" cvar="$perkMiner69r_LBD_XP" operation="add" value="8">
					<requirement name="NotHasBuff" buff="buffLBD_perkMiner69r_XPCoolDown"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfPrimaryActionRayHit" action="AddBuff" buff="buffLBD_perkMiner69r_XPCoolDown">
					<requirement name="NotHasBuff" buff="buffLBD_perkMiner69r_XPCoolDown"/>
				</triggered_effect>
				<!-- Level Up Check -->
				<triggered_effect trigger="onSelfPrimaryActionRayHit" action="AddBuff" buff="buffLBD_perkMiner69r_LevelUpCheck">
					<requirement name="CVarCompare" cvar="$perkMiner69r_LBD_XP" operation="GTE" value="@$perkMiner69r_LBD_XPToNext"/>
				</triggered_effect>
			</effect_group>
			<!-- Placeholders for remaining Strength perks to be implemented later -->
			<effect_group name="Grand Slam"/>
			<effect_group name="Flurry of Blows"/>
			<effect_group name="Pack Mule"/>
			<effect_group name="Strength Mastery"/>
			<effect_group name="Mother Lode"/>
			<effect_group name="Junk Miner"/>
		</buff>
		<!-- Buff #2: SUPPORTING BUFFS (Cooldowns and Level-Up Handlers) -->
		<!-- Cooldowns -->
		<buff name="buffLBD_attStrength_XPCoolDown" hidden="true">
			<duration value="1"/>
		</buff>
		<buff name="buffLBD_perkBoomstick_XPCoolDown" hidden="true">
			<duration value="1"/>
		</buff>
		<buff name="buffLBD_perkPummelPete_XPCoolDown" hidden="true">
			<duration value="1"/>
		</buff>
		<buff name="buffLBD_perkSkullCrusher_XPCoolDown" hidden="true">
			<duration value="1"/>
		</buff>
		<buff name="buffLBD_perkMiner69r_XPCoolDown" hidden="true">
			<duration value="1.5"/>
		</buff>
		<!-- Level-Up Handlers -->
		<buff name="buffLBD_attStrength_LevelUpCheck" hidden="true">
			<stack_type value="ignore"/>
			<duration value="1"/>
			<effect_group>
				<requirement name="!RequirementIsProgressionLocked, SCore" progression_name="attStrength"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddProgressionLevel" progression_name="attStrength" level="1"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$attStrength_LBD_XP" operation="subtract" value="@$attStrength_LBD_XPToNext"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$attStrength_LBD_XPToNext" operation="multiply" value="1.3"/>
				<triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="ui_level_up"/>
			</effect_group>
		</buff>
		<buff name="buffLBD_perkBoomstick_LevelUpCheck" hidden="true">
			<stack_type value="ignore"/>
			<duration value="1"/>
			<effect_group>
				<requirement name="!RequirementIsProgressionLocked, SCore" progression_name="perkBoomstick"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddProgressionLevel" progression_name="perkBoomstick" level="1"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$perkBoomstick_LBD_XP" operation="subtract" value="@$perkBoomstick_LBD_XPToNext"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$perkBoomstick_LBD_XPToNext" operation="multiply" value="1.2"/>
				<triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="ui_level_up"/>
			</effect_group>
		</buff>
		<buff name="buffLBD_perkPummelPete_LevelUpCheck" hidden="true">
			<stack_type value="ignore"/>
			<duration value="1"/>
			<effect_group>
				<requirement name="!RequirementIsProgressionLocked, SCore" progression_name="perkPummelPete"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddProgressionLevel" progression_name="perkPummelPete" level="1"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$perkPummelPete_LBD_XP" operation="subtract" value="@$perkPummelPete_LBD_XPToNext"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$perkPummelPete_LBD_XPToNext" operation="multiply" value="1.2"/>
				<triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="ui_level_up"/>
			</effect_group>
		</buff>
		<buff name="buffLBD_perkSkullCrusher_LevelUpCheck" hidden="true">
			<stack_type value="ignore"/>
			<duration value="1"/>
			<effect_group>
				<requirement name="!RequirementIsProgressionLocked, SCore" progression_name="perkSkullCrusher"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddProgressionLevel" progression_name="perkSkullCrusher" level="1"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$perkSkullCrusher_LBD_XP" operation="subtract" value="@$perkSkullCrusher_LBD_XPToNext"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$perkSkullCrusher_LBD_XPToNext" operation="multiply" value="1.2"/>
				<triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="ui_level_up"/>
			</effect_group>
		</buff>
		<buff name="buffLBD_perkMiner69r_LevelUpCheck" hidden="true">
			<stack_type value="ignore"/>
			<duration value="1"/>
			<effect_group>
				<requirement name="!RequirementIsProgressionLocked, SCore" progression_name="perkMiner69r"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddProgressionLevel" progression_name="perkMiner69r" level="1"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$perkMiner69r_LBD_XP" operation="subtract" value="@$perkMiner69r_LBD_XPToNext"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$perkMiner69r_LBD_XPToNext" operation="multiply" value="1.2"/>
				<triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="ui_level_up"/>
			</effect_group>
		</buff>
	</append>
</configs>